var s=o=>o;function r(o){let t=[];if(o){for(let e of o)if(e){if(Array.isArray(e)){t.push(...r(e));continue}e instanceof Promise||t.push(e.name)}}return t}var a=({plugin:o,config:t})=>{if(!o||o instanceof Promise)return!1;let e=new Set(r(t?.vite?.plugins)),n=new Set;if(typeof o=="string"&&n.add(o),typeof o=="object")if(Array.isArray(o)){let i=new Set(r(o));for(let g of i)n.add(g)}else n.add(o.name);return[...n].some(i=>e.has(i))};var f=({warnDuplicated:o=!0,plugin:t,config:e,logger:n,updateConfig:i})=>{o&&e&&n&&a({plugin:t,config:e})&&n.warn(`The Vite plugin "${t.name}" is already present in your Vite configuration, this plugin may not behave correctly.`),i({vite:{plugins:[t]}})};var d=s({name:"addVitePlugin",hook:"astro:config:setup",implementation:({config:o,logger:t,updateConfig:e})=>n=>f({plugin:n,config:o,logger:t,updateConfig:e})});export{d as addVitePluginPlugin};
//# sourceMappingURL=add-vite-plugin.js.map