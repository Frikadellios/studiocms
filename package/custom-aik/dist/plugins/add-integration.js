var s=e=>e;import"astro";import{AstroError as g}from"astro/errors";var m=({name:e,position:t,relativeTo:o,config:r})=>{let n=r.integrations.findIndex(i=>i.name===e);if(n===-1)return!1;if(t===void 0)return!0;if(o===void 0)throw new g("Cannot perform a relative integration check without a relative reference.","Pass `relativeTo` on your call to `hasIntegration` or remove the `position` option.");let a=r.integrations.findIndex(i=>i.name===o);if(a===-1)throw new g("Cannot check relative position against an absent integration.");return t==="before"?n<a:n>a};var d=({integration:e,options:t,updateConfig:o,config:r,logger:n})=>{if(t?.ensureUnique&&m({name:e.name,config:r})){n.warn(`Integration "${e.name}" has already been added by the user or another integration. Skipping.`);return}o({integrations:[e]})};var y=s({name:"addIntegration",hook:"astro:config:setup",implementation:({updateConfig:e,config:t,logger:o})=>(r,n)=>d({integration:r,options:n,updateConfig:e,config:t,logger:o})});export{y as addIntegrationPlugin};
//# sourceMappingURL=add-integration.js.map