---
import sitemap from 'sitemap-ext:config';
// @ts-expect-error - This is a missing type definition for the `astro:db` import since its a virtual module during Astro Runtime
import { Pages, db, eq } from 'astro:db';
import Layout from '../layouts/BlogPost.astro';
// import { markdown } from '../utils/marked';
// import Config from 'virtual:astro-studio-cms:config';
// import { renderMarkDoc } from '../utils/markdoc';

sitemap(true); // opt-in

const postArrayed = await db.select().from(Pages).where(eq(Pages.slug, "about"));

const post = postArrayed[0];

type Props = {
	post: typeof Pages.$inferSelect;
};


// function contentRenderer() {
//     if (Config.contentRenderer === 'markdoc') {
//         return renderMarkDoc(post.content);
//     }
//     return markdown(post.content);

// }
---

<Layout
	title={post.title}
	description={post.description}
	publishedAt={post.publishedAt}
	heroImage={post.heroImage}
>
	<!-- <Fragment 
		set:html={contentRenderer()} /> -->
  <div id="content"></div>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script type="module">
    document.getElementById('content').innerHTML =
      marked.parse(post.content);
  </script>
</Layout>
<style>
    .btn {
        padding: 0.5rem;
        background-color: rgb(184, 184, 184);
        font-weight: bold;
        color: #202020;
        border: 1px solid #202020;
        border-radius: 99rem;
        cursor: pointer;
		float: right;
    }
</style>